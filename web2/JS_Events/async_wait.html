<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async Await</title>
</head>

<body>

    <!-- 
        settle means resolve or reject. 
        resolve means promise has settled succesfully. 
        reject means promise has not settled succesfully.
    -->

    <script>
        // async function means it runs on the background. 
        async function getData() {
            // Simulate getting data from a server. 
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(455);
                }, 3500)
            })
        }

        async function getData() {
            // Simulate getting data from a server. 
            let x = await fetch("https://jsonplaceholder.typicode.com/todos/1")
            let data = await x.json();
            console.log(data);
            return 455;
        }

        // sending the Post request. 
        async function postData(url = "", data = {}) {
            const response = await fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            });
            return response.json();
        }

        postData("https://example.com/answer", {
            answer: 42
        }).then((data) => {
            console.log(data);
        })

        async function main() {
            console.log("Loading Modules.");
            console.log("Do Something else.");
            console.log("Load Data.");

            let data = await getData();

            console.log(data);
            console.log("Process Data.");
            console.log("Task 2");
        }

        main();

        // data.then((v)=> {
        //     console.log(data);
        //     console.log("Process Data.");
        //     console.log("Task 2");
        // })

    </script>
</body>

</html>